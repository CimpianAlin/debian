#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/rules/patchsys-quilt.mk

# Add here any variable or target overrides you need.

build/freenet-daemon::
	# Build freenet.jar, freenet-ext.jar, and generate GWT javascript
	cd $(CURDIR)/fred-@RELEASE@ && ant -Dgit.revision=@REVISION@ -Dtest.skip=true -Dsuppress.gjs=false -Dsuppress.ext=false package

install/freenet-daemon::
	install -m 644 $(CURDIR)/fred-@RELEASE@/lib/freenet-cvs-snapshot.jar $(CURDIR)/debian/freenet-daemon/usr/share/java
	install -m 644 $(CURDIR)/fred-@RELEASE@/lib/freenet-ext.jar $(CURDIR)/debian/freenet-daemon/usr/lib/java

clean::
	cd $(CURDIR)/fred-@RELEASE@/ && ant clean-all
